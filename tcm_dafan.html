<style>
    ul,
    menu,
    dir {
        display: block;
        list-style-type: disc;
        -webkit-margin-before: 1em;
        -webkit-margin-after: 1em;
        -webkit-margin-start: 0px;
        -webkit-margin-end: 0px;
        -webkit-padding-start: 40px;
    }
</style>
<script src="tcmdafan.js"></script>
<script src="tcmfufandict.js"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script>

    function addLabel(parent, text) {
        label = $("<label>")
        label.text(text)
        parent.append(label)
        return label
    }
    function addLink(parent, text, url) {
        link = $("<a>")
        link.text(text)
        link.prop("href", url)
        parent.append(link)
        return label
    }
    function addLine(parent) {
        line = $("<hr>")
        parent.append(line)
    }
    function addSubTitle(parent, text) {
        addNextLine(main)
        addLabel(parent, text)
    }
    function addSubTitleAndLabel(parent, title, text, separator = "，", isFufan = false) {
        span = $("<div>")
        addLabel(span, title)
        addBlank(span)
        if (text.indexOf(separator) != -1) {
            addList(span, text, separator, isFufan)
        } else if (text.indexOf("◦") != -1) {
            addList(span, text, "◦", isFufan)
        } else {
            if (text.trim() == "") {
                text = "N/A"
            }
            addLabel(span, text.replace("•", "").replace("–", "").replace("|", "").replace("◦", "").replace("–", ""))
        }
        parent.append(span)
    }
    function addList(parent, text, separator, isFufan = false) {
        list = text.split(separator)
        ul = $("<ul>")
        for (i = 0; i < list.length; i++) {
            if (list[i].trim() == "") {
                continue
            }
            li = $("<li>")
            content = list[i].trim().replace("•", "").replace("–", "").replace("|", "").replace("◦", "").replace("–", "")
            if (isFufan) {
                array = content.split("=>")
                if (fufandict[array[0]] === undefined) {
                    li.text(content)
                } else {
                    li.html("<a href='" + fufandict[array[0]] + "'>" + array[0] + "</a>=>" + array[1])
                }
            } else {
                li.text(content)
            }
            ul.append(li)
        }
        parent.append(ul)
        return ul
    }
    function addBlank(parent) {
        parent.append("<label>&nbsp;</label>")
    }
    function addNextLine(parent) {
        parent.append("<br/>")
    }
    function addGroupSeperator(parent) {
        parent.append("<label>&nbsp;->&nbsp;</label>")
    }
    function getDiv(dict) {
        main = $("<div>")
        addLabel(main, dict["NAME"])
        addBlank(main)
        addLink(main, dict["PINYIN_NAME"], dict["URL"])
        addBlank(main)
        addLabel(main, "( " + dict["LATIN_NAME"] + " )")
        addBlank(main)
        addNextLine(main)
        addSubTitleAndLabel(main, "Common Name:", dict["COMMON_NAME"])
        addNextLine(main)
        addSubTitleAndLabel(main, "Literal English:", dict["LITERAL_ENGLISH"])
        addNextLine(main)
        addLabel(main, dict["SUBJECT"])
        addNextLine(main)
        addLabel(main, dict["GROUP"])
        addGroupSeperator(main)
        addLabel(main, dict["SUBGROUP_1"])
        addGroupSeperator(main)
        addLabel(main, dict["SUBGROUP_2"])
        addNextLine(main)
        addSubTitleAndLabel(main, "Channels:", dict["CHANNELS"])
        addSubTitleAndLabel(main, "Properties:", dict["PROPERTIES"])
        addSubTitleAndLabel(main, "Actions & Indications:", dict["ACTIONS_INDICATIONS"], separator = "•")
        addSubTitleAndLabel(main, "Dosage:", dict["DOSAGE"])
        addNextLine(main)
        addSubTitleAndLabel(main, "Common Combinations:", dict["COMMON_COMBINATIONS"], separator = "•")
        addSubTitleAndLabel(main, "Others:", dict["OTHERS"], separator = "|")
        addSubTitleAndLabel(main, "Fufan:", dict["FUFAN"], separator = "|", isFufan = true)
        return main
    }
    $(function () {
        area = $("#mainDiv")
        for (ii = 0; ii < dafanList.length; ii++) {
            console.log(ii)
            div = getDiv(dafanList[ii])
            area.append(div)
            addLine(area)
            console.log(ii)
        }
    });

</script>

<body>
    <div id="mainDiv">

    </div>

</body>